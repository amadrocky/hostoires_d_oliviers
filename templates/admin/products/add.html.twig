{% extends 'admin/adminLayout.html.twig' %}

{% block title %}Ajouter un produit
{% endblock %}

{% block content %}
	{% for label, messages in app.flashes %}
		{% for message in messages %}
			<div class="alert alert-info alert-dismissible fade show my-3" role="alert">
				{{ message }}
				<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
		{% endfor %}
	{% endfor %}
	<h1>Ajouter un produit</h1>
	<form action="{{ path('admin_products_add') }}" method="post" enctype="multipart/form-data">
		{{ form_start(form) }}
		{{ form_row(form.name) }}
		{{ form_row(form.category) }}
		{{ form_row(form.mainDescription) }}
		{{ form_row(form.price) }}
		{{ form_row(form.originPrice) }}
		{{ form_row(form.tax) }}
		{{ form_row(form.mainAttribute1) }}
		{{ form_row(form.mainAttribute2) }}
		{{ form_row(form.mainAttribute3) }}
		<div class="my-2">
			<label for="img1" class="cursorPointer m-0 img-product">
				<i class="fas fa-camera"></i>
				Photo
																																                                1</label>
			<input id="img1" name="img1" type="file" accept="image/png, image/jpeg" onchange="loadFile('output1')"/>
			<img id="output1" class="input-photo my-1"/>
		</div>
		<div class="mb-2">
			<label for="img2" class="cursorPointer m-0 img-product">
				<i class="fas fa-camera"></i>
				Photo
																																                                2</label>
			<input id="img2" name="img2" type="file" accept="image/png, image/jpeg" onchange="loadFile('output2')"/>
			<img id="output2" class="input-photo my-1"/>
		</div>
		<div class="mb-2">
			<label for="img3" class="cursorPointer m-0 img-product">
				<i class="fas fa-camera"></i>
				Photo
																																                                3</label>
			<input id="img3" name="img3" type="file" accept="image/png, image/jpeg" onchange="loadFile('output3')"/>
			<img id="output3" class="input-photo my-1"/>
		</div>
		{{ form_row(form.descriptionShow1) }}
		{{ form_row(form.descriptionShow2) }}
		{{ form_row(form.descriptionShow3) }}
		{{ form_row(form.quantity) }}
		<button class="btn btn-primary btn-block my-3">{{ button_label|default('Valider') }}</button>
		{{ form_end(form) }}
	</form>

	<script type="text/javascript">

		function loadFile(imgId) {
const output = document.getElementById(imgId);
let inputFileSize = output.previousElementSibling.files[0].size;
if (inputFileSize > 6000000) {
swal({title: "Fichier trop volumineux", text: "Le fichier ne doit pas d√©passer 6 Mb", icon: "error"});
} else {
output.src = URL.createObjectURL(event.target.files[0]);
output.onload = function () {
URL.revokeObjectURL(output.src)
}
}
}
	</script>
{% endblock %}
